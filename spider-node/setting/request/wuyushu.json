{"dear":"/**\n* 如果这里是使用 get 或者 post 请求，则这里 res 为请求返回内容\n* 如果为 page （直接获取页面） 则 res 为 返回页面的 $(document) 对象的函数，并且该函数会在页面加载完成时执行\n* req 为请求的所有参数 包括 url headers params\n* times 为请求次数\n* */\nfunction loaded(req,times,res) {\n\t/**\n\t* 这里可以使用 $ 即 jq 对象\n\t* 可以使用 eventManager.events.mysql 中的接口将数据录入数据库\n\t* 也可以使用 eventManager 中的 query 单独定义的方法\n\t* 也可以使用 eventManager.events.file 中的接口将数据保存为本地文件\n\t* 也可以使用 eventManager 中的 writeFile appendFile \n\t* 调用 nextProxy.time += 1; 会执行下一次调用\n\t* */\n\tvar ret = [];\n\tvar trs = Array.prototype.slice.call($(res).find('[bordercolor=\"#008080\"]')[1].getElementsByTagName(\"tr\"));\n\ttrs.pop();trs.shift();trs.shift();\n\ttrs.forEach(function(tr){\n\t\tvar one = [];\n\t\tArray.prototype.slice.call(tr.getElementsByTagName(\"td\"))\n\t\t\t.forEach(function(td){\n\t\t\t\tone.push(td.innerText.trim());\n\t\t\t});\n\t\tret.push(one);\n\t});\n\teventManager.writeFile(\"ret\" + times + \".json\",JSON.stringify(ret),function(ret){\n\t\tif (ret[0]) {\n\t\t\tnotify(null,\"爬取次数为\" + times + \"时发生错误\");\n\t\t} else {}\n\t\tnextProxy.time += 1;\n\t});\n}","headerParams":[],"requestParams":[{"defaultValue":"全部","method":"defaultValue","paramName":"searchDistrict"},{"defaultValue":"全部","method":"defaultValue","paramName":"searchRegType"},{"defaultValue":"","method":"defaultValue","paramName":"searchRegNo"},{"defaultValue":"","method":"defaultValue","paramName":"searchName"},{"defaultValue":"","method":"defaultValue","paramName":"searchDistrictHidden"},{"defaultValue":"1","method":"defaultValue","paramName":"districtNotProvidedFlag"},{"defaultValue":"117","method":"defaultValue","paramName":"mwcwMaxPageNo"},{"defaultValue":"247","method":"defaultValue","paramName":"mwcMaxPageNo"},{"defaultValue":"0","method":"defaultValue","paramName":"gbcPageNo"},{"defaultValue":"0","method":"defaultValue","paramName":"rseMaxPageNo"},{"defaultValue":"0","method":"defaultValue","paramName":"riMaxPageNo"},{"defaultValue":"0","method":"defaultValue","paramName":"apMaxPageNo"},{"defaultValue":"0","method":"defaultValue","paramName":"mwcwPageNo"},{"defaultValue":"0","method":"defaultValue","paramName":"mwcPageNo"},{"defaultValue":"0","method":"defaultValue","paramName":"gbcPageNo"},{"defaultValue":"0","method":"defaultValue","paramName":"rsePageNo"},{"defaultValue":"search","method":"defaultValue","paramName":"searchAction"},{"defaultValue":"2","method":"defaultValue","paramName":"langCode"},{"defaultValue":"1","method":"defaultValue","paramName":"districtFlag"},{"defaultValue":"1","method":"defaultValue","paramName":"regTypeFlag"},{"defaultValue":"1","method":"defaultValue","paramName":"apPageNo"},{"defaultValue":"0","method":"defaultValue","paramName":"riPageNo"}],"requestUrl":{"method":"屋宇署","type":"Post","url":"https://mwerdr.bd.gov.hk/SEARCH/QPSearch.do?method=SetPage&langCode=2&type=MWC(W)"}}